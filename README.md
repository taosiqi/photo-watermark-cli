# ğŸ“¸ Photo Watermark CLI

ä¸€ä¸ªç°ä»£åŒ–çš„ TypeScript CLI å·¥å…·ï¼Œç”¨äºæ™ºèƒ½åœ°ä¸ºç…§ç‰‡æ·»åŠ æ—¶é—´æ°´å°ã€‚

[![npm version](https://badge.fury.io/js/photo-watermark-cli.svg)](https://badge.fury.io/js/photo-watermark-cli)
[![TypeScript](https://img.shields.io/badge/%3C%2F%3E-TypeScript-%230074c1.svg)](http://www.typescriptlang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½ç›¸å¯¹å¤§å°ç®—æ³•** - æ ¹æ®å›¾ç‰‡åˆ†è¾¨ç‡è‡ªåŠ¨è°ƒæ•´æ°´å°å¤§å°
- ğŸ“¸ **EXIF æ—¶é—´æå–** - ä¼˜å…ˆä½¿ç”¨ç…§ç‰‡çš„å®é™…æ‹æ‘„æ—¶é—´
- ğŸ¨ **å¤šç§æ°´å°ä½ç½®** - æ”¯æŒå››ä¸ªè§’è½çš„çµæ´»å®šä½
- ğŸ–¼ï¸ **å…¨æ ¼å¼æ”¯æŒ** - JPGã€PNGã€TIFFã€WebPã€BMP
- âš¡ **é«˜æ€§èƒ½å¤„ç†** - åŸºäº Sharp åº“çš„å¿«é€Ÿå›¾åƒå¤„ç†
- ğŸ”§ **é…ç½®æŒä¹…åŒ–** - ä¸ªäººè®¾ç½®è‡ªåŠ¨ä¿å­˜
- ğŸ’» **ç°ä»£ TypeScript** - å®Œå…¨ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ
- ğŸª **äº¤äº’å¼ç•Œé¢** - å‹å¥½çš„å‘½ä»¤è¡Œäº¤äº’ä½“éªŒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
npm install -g photo-watermark-cli
```

### åŸºæœ¬ä½¿ç”¨

```bash
# äº¤äº’å¼æ¨¡å¼ï¼ˆæ¨èï¼‰
photo-watermark add

# å‘½ä»¤è¡Œæ¨¡å¼
photo-watermark add -d /path/to/photos -o /path/to/output
```

## ğŸ“‹ å®Œæ•´ä½¿ç”¨æŒ‡å—

### 1. äº¤äº’å¼æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰

```bash
# å¯åŠ¨äº¤äº’å¼ç•Œé¢
npm start

# æˆ–è€…ç›´æ¥è¿è¡Œ
photo-watermark add
```

è¿™å°†å¯åŠ¨äº¤äº’å¼ç•Œé¢ï¼Œé€æ­¥å¼•å¯¼ä½ å®Œæˆé…ç½®ã€‚

### 2. å‘½ä»¤è¡Œæ¨¡å¼ï¼ˆæ¨èé«˜çº§ç”¨æˆ·ï¼‰

```bash
# åŸºæœ¬ç”¨æ³• - ä¸ºæŒ‡å®šç›®å½•ä¸‹çš„ç…§ç‰‡æ·»åŠ æ°´å°
photo-watermark add -d /path/to/your/photos

# æŒ‡å®šè¾“å‡ºç›®å½•ï¼ˆä¸è¦†ç›–åŸæ–‡ä»¶ï¼‰
photo-watermark add -d /path/to/photos -o /path/to/output

# è‡ªå®šä¹‰æ—¶é—´æ ¼å¼
photo-watermark add -d /path/to/photos -f "YYYYå¹´MMæœˆDDæ—¥ HH:mm"

# å¯ç”¨äº¤äº’å¼æ¨¡å¼
photo-watermark add -d ./photos -i

# åˆ—å‡ºç›®å½•ä¸‹æ‰€æœ‰æ”¯æŒçš„å›¾ç‰‡æ–‡ä»¶
photo-watermark list /path/to/photos
```

### 3. é…ç½®ç®¡ç†

```bash
# æ˜¾ç¤ºå½“å‰é…ç½®
photo-watermark config

# é‡ç½®é…ç½®
photo-watermark config --reset

# æ˜¾ç¤ºé…ç½®æ–‡ä»¶è·¯å¾„
photo-watermark config --path
```

## ğŸ¨ é…ç½®é€‰é¡¹

### æ—¶é—´æ¥æº

1. **EXIF ä¿¡æ¯**ï¼šä¼˜å…ˆä½¿ç”¨ç…§ç‰‡çš„æ‹æ‘„æ—¶é—´ï¼ˆDateTimeOriginalã€DateTimeã€DateTimeDigitizedï¼‰
2. **æ–‡ä»¶æ—¶é—´**ï¼šå¦‚æœæ²¡æœ‰ EXIF ä¿¡æ¯ï¼Œä½¿ç”¨æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´

### æ—¶é—´æ ¼å¼

- `YYYY-MM-DD HH:mm:ss` (é»˜è®¤): 2024-12-01 14:30:25
- `YYYYå¹´MMæœˆDDæ—¥`: 2024 å¹´ 12 æœˆ 01 æ—¥
- `MM/DD/YYYY HH:mm`: 12/01/2024 14:30
- `DD.MM.YYYY`: 01.12.2024

### æ°´å°ä½ç½®

- **å·¦ä¸‹è§’** (bottom-left) - é»˜è®¤ä½ç½®
- **å³ä¸‹è§’** (bottom-right)
- **å·¦ä¸Šè§’** (top-left)
- **å³ä¸Šè§’** (top-right)

### æ ·å¼é€‰é¡¹

- **å­—ä½“å¤§å°**: 12-48 åƒç´ ï¼Œæ™ºèƒ½ç›¸å¯¹ç¼©æ”¾
- **å­—ä½“é¢œè‰²**: ç™½è‰²ã€é»‘è‰²ã€çº¢è‰²ã€è“è‰²ã€ç»¿è‰²ã€é»„è‰²
- **æ–‡å­—é˜´å½±**: å¢å¼ºå¤æ‚èƒŒæ™¯ä¸‹çš„å¯è¯»æ€§
- **å›¾ç‰‡è´¨é‡**: 1-100ï¼Œæ§åˆ¶è¾“å‡ºæ–‡ä»¶è´¨é‡

## ğŸ”§ æ™ºèƒ½ç›¸å¯¹å¤§å°ç®—æ³•

æœ¬å·¥å…·çš„æ ¸å¿ƒç‰¹æ€§æ˜¯æ™ºèƒ½ç›¸å¯¹å¤§å°ç®—æ³•ï¼Œç¡®ä¿æ°´å°åœ¨ä¸åŒåˆ†è¾¨ç‡çš„å›¾ç‰‡ä¸Šéƒ½æœ‰åˆé€‚çš„å¤§å°ï¼š

| åˆ†è¾¨ç‡             | å­—ä½“å¤§å° | ç¼©æ”¾æ¯”ä¾‹ |
| ------------------ | -------- | -------- |
| 640x480 (æ ‡æ¸…)     | 12px     | 0.25x    |
| 1920x1080 (å…¨é«˜æ¸…) | 14px     | 0.56x    |
| 3840x2160 (4K)     | 27px     | 1.13x    |
| 7680x4320 (8K)     | 54px     | 2.25x    |

## ğŸ“ æ”¯æŒçš„å›¾ç‰‡æ ¼å¼

- **JPEG** (.jpg, .jpeg) - æœ€å¸¸ç”¨çš„ç…§ç‰‡æ ¼å¼
- **PNG** (.png) - æ”¯æŒé€æ˜åº¦çš„å›¾ç‰‡æ ¼å¼
- **TIFF** (.tiff) - é«˜è´¨é‡ä¸“ä¸šå›¾åƒæ ¼å¼
- **WebP** (.webp) - ç°ä»£ç½‘ç»œä¼˜åŒ–æ ¼å¼
- **BMP** (.bmp) - Windows ä½å›¾æ ¼å¼

## ğŸ’¡ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### åœºæ™¯ 1ï¼šæ—…è¡Œç…§ç‰‡æ•´ç†

```bash
# ä¸ºæ—…è¡Œç…§ç‰‡æ·»åŠ æ‹æ‘„æ—¶é—´ï¼Œè¾“å‡ºåˆ°æ–°ç›®å½•
photo-watermark add -d ~/Pictures/æ—…è¡Œ2024 -o ~/Pictures/æ—…è¡Œ2024_å¸¦æ°´å°
```

### åœºæ™¯ 2ï¼šæ´»åŠ¨ç…§ç‰‡æ‰¹å¤„ç†

```bash
# é¢„è§ˆæ•ˆæœï¼ˆä¸ä¿®æ”¹æ–‡ä»¶ï¼‰
photo-watermark add -d ./event_photos --dry-run

# ç¡®è®¤æ— è¯¯åæ‰§è¡Œ
photo-watermark add -d ./event_photos -f "YYYYå¹´MMæœˆDDæ—¥ HH:mm"
```

### åœºæ™¯ 3ï¼šç…§ç‰‡å­˜æ¡£

```bash
# ç›´æ¥åœ¨åŸå›¾ä¸Šæ·»åŠ æ°´å°ï¼ˆè¯·å…ˆå¤‡ä»½ï¼ï¼‰
photo-watermark add -d ./archive_photos
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½é‡è¦ç…§ç‰‡**ï¼šå»ºè®®åœ¨å¤„ç†é‡è¦ç…§ç‰‡å‰å…ˆåšå¤‡ä»½
2. **é¢„è§ˆåŠŸèƒ½**ï¼šä½¿ç”¨ `--dry-run` é€‰é¡¹å¯ä»¥é¢„è§ˆæ•ˆæœè€Œä¸ä¿®æ”¹æ–‡ä»¶
3. **è¾“å‡ºç›®å½•**ï¼šå¦‚æœæŒ‡å®šè¾“å‡ºç›®å½•ï¼Œä¼šä¿æŒåŸæœ‰çš„ç›®å½•ç»“æ„
4. **æ€§èƒ½**ï¼šä½¿ç”¨ Sharp åº“ï¼Œå¤„ç†é€Ÿåº¦è¾ƒå¿«ï¼Œä½†å¤§é‡é«˜åˆ†è¾¨ç‡ç…§ç‰‡å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´
5. **æƒé™**ï¼šç¡®ä¿å¯¹ç›®æ ‡ç›®å½•æœ‰è¯»å†™æƒé™

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **"ç›®å½•ä¸å­˜åœ¨"é”™è¯¯**

   - æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®
   - ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹äºå½“å‰ç›®å½•çš„æ­£ç¡®è·¯å¾„

2. **"æƒé™è¢«æ‹’ç»"é”™è¯¯**

   - æ£€æŸ¥ç›®å½•å’Œæ–‡ä»¶çš„è¯»å†™æƒé™
   - åœ¨ macOS/Linux ä¸Šå¯èƒ½éœ€è¦ä½¿ç”¨ `sudo`

3. **"æœªæ‰¾åˆ°å›¾ç‰‡æ–‡ä»¶"**

   - ç¡®è®¤ç›®å½•ä¸‹æœ‰æ”¯æŒçš„å›¾ç‰‡æ ¼å¼
   - ä½¿ç”¨ `list` å‘½ä»¤æ£€æŸ¥å¯è¯†åˆ«çš„æ–‡ä»¶

4. **å¤„ç†ç¼“æ…¢**
   - å¤§æ–‡ä»¶å’Œé«˜åˆ†è¾¨ç‡å›¾ç‰‡éœ€è¦æ›´å¤šå¤„ç†æ—¶é—´
   - å¯ä»¥å…ˆç”¨å°æ‰¹é‡æµ‹è¯•

### è·å–å¸®åŠ©

```bash
# æŸ¥çœ‹æ•´ä½“å¸®åŠ©
photo-watermark --help

# æŸ¥çœ‹ç‰¹å®šå‘½ä»¤å¸®åŠ©
photo-watermark add --help
photo-watermark list --help
photo-watermark config --help
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 8.0.0
- TypeScript >= 5.0.0

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/taosiqi/photo-watermark-cli.git
cd photo-watermark-cli

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºé¡¹ç›®
npm run build

# è¿è¡Œæµ‹è¯•
npm run test
```

### é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types.ts          # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ bin/
â”‚   â”‚   â””â”€â”€ watermark.ts  # CLI å…¥å£ç‚¹
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ config.ts     # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ scanner.ts    # å›¾ç‰‡æ‰«æ
â”‚       â””â”€â”€ watermark.ts  # æ ¸å¿ƒæ°´å°å¤„ç†
â”œâ”€â”€ dist/                 # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â””â”€â”€ package.json          # é¡¹ç›®é…ç½®
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦ç»†æŒ‡å—ã€‚

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤ Pull Request

## ğŸ“ è®¸å¯è¯

MIT License - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [npm åŒ…](https://www.npmjs.com/package/photo-watermark-cli)
- [GitHub ä»“åº“](https://github.com/taosiqi/photo-watermark-cli)
- [é—®é¢˜åé¦ˆ](https://github.com/taosiqi/photo-watermark-cli/issues)
- [æ›´å¤šä½¿ç”¨ç¤ºä¾‹](EXAMPLES.md)

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- ğŸ¯ æ™ºèƒ½ç›¸å¯¹å¤§å°ç®—æ³•ç¡®ä¿æ°´å°è§†è§‰ä¸€è‡´æ€§
- ğŸ“¦ åŒ…å¤§å°ï¼š~19KBï¼ˆå‹ç¼©åï¼‰
- âš¡ æ”¯æŒæ‰€æœ‰ä¸»æµå›¾ç‰‡æ ¼å¼
- ğŸ”§ å®Œå…¨ç±»å‹å®‰å…¨çš„ TypeScript å®ç°
- ğŸŒŸ ç°ä»£åŒ–çš„ CLI äº¤äº’ä½“éªŒ

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ˜Ÿï¼
